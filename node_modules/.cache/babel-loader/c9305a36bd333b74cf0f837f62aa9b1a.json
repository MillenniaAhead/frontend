{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport * as React from 'react';\nimport { useState, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport raf from \"rc-util/es/raf\";\nimport ResizeObserver from 'rc-resize-observer';\nimport useRaf, { useRafState } from '../hooks/useRaf';\nimport TabNode from './TabNode';\nimport useOffsets from '../hooks/useOffsets';\nimport useVisibleRange from '../hooks/useVisibleRange';\nimport OperationNode from './OperationNode';\nimport TabContext from '../TabContext';\nimport useTouchMove from '../hooks/useTouchMove';\nimport useRefs from '../hooks/useRefs';\nimport AddButton from './AddButton';\nimport useSyncState from '../hooks/useSyncState';\nvar ExtraContent = function ExtraContent(_ref) {\n  var position = _ref.position,\n    prefixCls = _ref.prefixCls,\n    extra = _ref.extra;\n  if (!extra) return null;\n  var content; // Parse extra\n\n  var assertExtra = {};\n  if (extra && _typeof(extra) === 'object' && ! /*#__PURE__*/React.isValidElement(extra)) {\n    assertExtra = extra;\n  } else {\n    assertExtra.right = extra;\n  }\n  if (position === 'right') {\n    content = assertExtra.right;\n  }\n  if (position === 'left') {\n    content = assertExtra.left;\n  }\n  return content ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-extra-content\")\n  }, content) : null;\n};\nfunction TabNavList(props, ref) {\n  var _classNames;\n  var _React$useContext = React.useContext(TabContext),\n    prefixCls = _React$useContext.prefixCls,\n    tabs = _React$useContext.tabs;\n  var className = props.className,\n    style = props.style,\n    id = props.id,\n    animated = props.animated,\n    activeKey = props.activeKey,\n    rtl = props.rtl,\n    extra = props.extra,\n    editable = props.editable,\n    locale = props.locale,\n    tabPosition = props.tabPosition,\n    tabBarGutter = props.tabBarGutter,\n    children = props.children,\n    onTabClick = props.onTabClick,\n    onTabScroll = props.onTabScroll;\n  var tabsWrapperRef = useRef();\n  var tabListRef = useRef();\n  var operationsRef = useRef();\n  var innerAddButtonRef = useRef();\n  var _useRefs = useRefs(),\n    _useRefs2 = _slicedToArray(_useRefs, 2),\n    getBtnRef = _useRefs2[0],\n    removeBtnRef = _useRefs2[1];\n  var tabPositionTopOrBottom = tabPosition === 'top' || tabPosition === 'bottom';\n  var _useSyncState = useSyncState(0, function (next, prev) {\n      if (tabPositionTopOrBottom && onTabScroll) {\n        onTabScroll({\n          direction: next > prev ? 'left' : 'right'\n        });\n      }\n    }),\n    _useSyncState2 = _slicedToArray(_useSyncState, 2),\n    transformLeft = _useSyncState2[0],\n    setTransformLeft = _useSyncState2[1];\n  var _useSyncState3 = useSyncState(0, function (next, prev) {\n      if (!tabPositionTopOrBottom && onTabScroll) {\n        onTabScroll({\n          direction: next > prev ? 'top' : 'bottom'\n        });\n      }\n    }),\n    _useSyncState4 = _slicedToArray(_useSyncState3, 2),\n    transformTop = _useSyncState4[0],\n    setTransformTop = _useSyncState4[1];\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    wrapperScrollWidth = _useState2[0],\n    setWrapperScrollWidth = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    wrapperScrollHeight = _useState4[0],\n    setWrapperScrollHeight = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    wrapperContentWidth = _useState6[0],\n    setWrapperContentWidth = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    wrapperContentHeight = _useState8[0],\n    setWrapperContentHeight = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    wrapperWidth = _useState10[0],\n    setWrapperWidth = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    wrapperHeight = _useState12[0],\n    setWrapperHeight = _useState12[1];\n  var _useState13 = useState(0),\n    _useState14 = _slicedToArray(_useState13, 2),\n    addWidth = _useState14[0],\n    setAddWidth = _useState14[1];\n  var _useState15 = useState(0),\n    _useState16 = _slicedToArray(_useState15, 2),\n    addHeight = _useState16[0],\n    setAddHeight = _useState16[1];\n  var _useRafState = useRafState(new Map()),\n    _useRafState2 = _slicedToArray(_useRafState, 2),\n    tabSizes = _useRafState2[0],\n    setTabSizes = _useRafState2[1];\n  var tabOffsets = useOffsets(tabs, tabSizes, wrapperScrollWidth); // ========================== Util =========================\n\n  var operationsHiddenClassName = \"\".concat(prefixCls, \"-nav-operations-hidden\");\n  var transformMin = 0;\n  var transformMax = 0;\n  if (!tabPositionTopOrBottom) {\n    transformMin = Math.min(0, wrapperHeight - wrapperScrollHeight);\n    transformMax = 0;\n  } else if (rtl) {\n    transformMin = 0;\n    transformMax = Math.max(0, wrapperScrollWidth - wrapperWidth);\n  } else {\n    transformMin = Math.min(0, wrapperWidth - wrapperScrollWidth);\n    transformMax = 0;\n  }\n  function alignInRange(value) {\n    if (value < transformMin) {\n      return transformMin;\n    }\n    if (value > transformMax) {\n      return transformMax;\n    }\n    return value;\n  } // ========================= Mobile ========================\n\n  var touchMovingRef = useRef();\n  var _useState17 = useState(),\n    _useState18 = _slicedToArray(_useState17, 2),\n    lockAnimation = _useState18[0],\n    setLockAnimation = _useState18[1];\n  function doLockAnimation() {\n    setLockAnimation(Date.now());\n  }\n  function clearTouchMoving() {\n    window.clearTimeout(touchMovingRef.current);\n  }\n  useTouchMove(tabsWrapperRef, function (offsetX, offsetY) {\n    function doMove(setState, offset) {\n      setState(function (value) {\n        var newValue = alignInRange(value + offset);\n        return newValue;\n      });\n    }\n    if (tabPositionTopOrBottom) {\n      // Skip scroll if place is enough\n      if (wrapperWidth >= wrapperScrollWidth) {\n        return false;\n      }\n      doMove(setTransformLeft, offsetX);\n    } else {\n      if (wrapperHeight >= wrapperScrollHeight) {\n        return false;\n      }\n      doMove(setTransformTop, offsetY);\n    }\n    clearTouchMoving();\n    doLockAnimation();\n    return true;\n  });\n  useEffect(function () {\n    clearTouchMoving();\n    if (lockAnimation) {\n      touchMovingRef.current = window.setTimeout(function () {\n        setLockAnimation(0);\n      }, 100);\n    }\n    return clearTouchMoving;\n  }, [lockAnimation]); // ========================= Scroll ========================\n\n  function scrollToTab() {\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : activeKey;\n    var tabOffset = tabOffsets.get(key) || {\n      width: 0,\n      height: 0,\n      left: 0,\n      right: 0,\n      top: 0\n    };\n    if (tabPositionTopOrBottom) {\n      // ============ Align with top & bottom ============\n      var newTransform = transformLeft; // RTL\n\n      if (rtl) {\n        if (tabOffset.right < transformLeft) {\n          newTransform = tabOffset.right;\n        } else if (tabOffset.right + tabOffset.width > transformLeft + wrapperWidth) {\n          newTransform = tabOffset.right + tabOffset.width - wrapperWidth;\n        }\n      } // LTR\n      else if (tabOffset.left < -transformLeft) {\n        newTransform = -tabOffset.left;\n      } else if (tabOffset.left + tabOffset.width > -transformLeft + wrapperWidth) {\n        newTransform = -(tabOffset.left + tabOffset.width - wrapperWidth);\n      }\n      setTransformTop(0);\n      setTransformLeft(alignInRange(newTransform));\n    } else {\n      // ============ Align with left & right ============\n      var _newTransform = transformTop;\n      if (tabOffset.top < -transformTop) {\n        _newTransform = -tabOffset.top;\n      } else if (tabOffset.top + tabOffset.height > -transformTop + wrapperHeight) {\n        _newTransform = -(tabOffset.top + tabOffset.height - wrapperHeight);\n      }\n      setTransformLeft(0);\n      setTransformTop(alignInRange(_newTransform));\n    }\n  } // ========================== Tab ==========================\n  // Render tab node & collect tab offset\n\n  var _useVisibleRange = useVisibleRange(tabOffsets, {\n      width: wrapperWidth,\n      height: wrapperHeight,\n      left: transformLeft,\n      top: transformTop\n    }, {\n      width: wrapperContentWidth,\n      height: wrapperContentHeight\n    }, {\n      width: addWidth,\n      height: addHeight\n    }, _objectSpread(_objectSpread({}, props), {}, {\n      tabs: tabs\n    })),\n    _useVisibleRange2 = _slicedToArray(_useVisibleRange, 2),\n    visibleStart = _useVisibleRange2[0],\n    visibleEnd = _useVisibleRange2[1];\n  var tabNodeStyle = {};\n  if (tabPosition === 'top' || tabPosition === 'bottom') {\n    tabNodeStyle[rtl ? 'marginRight' : 'marginLeft'] = tabBarGutter;\n  } else {\n    tabNodeStyle.marginTop = tabBarGutter;\n  }\n  var tabNodes = tabs.map(function (tab, i) {\n    var key = tab.key;\n    return /*#__PURE__*/React.createElement(TabNode, {\n      id: id,\n      prefixCls: prefixCls,\n      key: key,\n      tab: tab\n      /* first node should not have margin left */,\n\n      style: i === 0 ? undefined : tabNodeStyle,\n      closable: tab.closable,\n      editable: editable,\n      active: key === activeKey,\n      renderWrapper: children,\n      removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n      ref: getBtnRef(key),\n      onClick: function onClick(e) {\n        onTabClick(key, e);\n      },\n      onRemove: function onRemove() {\n        removeBtnRef(key);\n      },\n      onFocus: function onFocus() {\n        scrollToTab(key);\n        doLockAnimation();\n        if (!tabsWrapperRef.current) {\n          return;\n        } // Focus element will make scrollLeft change which we should reset back\n\n        if (!rtl) {\n          tabsWrapperRef.current.scrollLeft = 0;\n        }\n        tabsWrapperRef.current.scrollTop = 0;\n      }\n    });\n  });\n  var onListHolderResize = useRaf(function () {\n    var _tabsWrapperRef$curre, _tabsWrapperRef$curre2, _innerAddButtonRef$cu, _innerAddButtonRef$cu2, _operationsRef$curren, _operationsRef$curren2, _tabListRef$current, _tabListRef$current2, _operationsRef$curren3;\n\n    // Update wrapper records\n    var offsetWidth = ((_tabsWrapperRef$curre = tabsWrapperRef.current) === null || _tabsWrapperRef$curre === void 0 ? void 0 : _tabsWrapperRef$curre.offsetWidth) || 0;\n    var offsetHeight = ((_tabsWrapperRef$curre2 = tabsWrapperRef.current) === null || _tabsWrapperRef$curre2 === void 0 ? void 0 : _tabsWrapperRef$curre2.offsetHeight) || 0;\n    var newAddWidth = ((_innerAddButtonRef$cu = innerAddButtonRef.current) === null || _innerAddButtonRef$cu === void 0 ? void 0 : _innerAddButtonRef$cu.offsetWidth) || 0;\n    var newAddHeight = ((_innerAddButtonRef$cu2 = innerAddButtonRef.current) === null || _innerAddButtonRef$cu2 === void 0 ? void 0 : _innerAddButtonRef$cu2.offsetHeight) || 0;\n    var newOperationWidth = ((_operationsRef$curren = operationsRef.current) === null || _operationsRef$curren === void 0 ? void 0 : _operationsRef$curren.offsetWidth) || 0;\n    var newOperationHeight = ((_operationsRef$curren2 = operationsRef.current) === null || _operationsRef$curren2 === void 0 ? void 0 : _operationsRef$curren2.offsetHeight) || 0;\n    setWrapperWidth(offsetWidth);\n    setWrapperHeight(offsetHeight);\n    setAddWidth(newAddWidth);\n    setAddHeight(newAddHeight);\n    var newWrapperScrollWidth = (((_tabListRef$current = tabListRef.current) === null || _tabListRef$current === void 0 ? void 0 : _tabListRef$current.offsetWidth) || 0) - newAddWidth;\n    var newWrapperScrollHeight = (((_tabListRef$current2 = tabListRef.current) === null || _tabListRef$current2 === void 0 ? void 0 : _tabListRef$current2.offsetHeight) || 0) - newAddHeight;\n    setWrapperScrollWidth(newWrapperScrollWidth);\n    setWrapperScrollHeight(newWrapperScrollHeight);\n    var isOperationHidden = (_operationsRef$curren3 = operationsRef.current) === null || _operationsRef$curren3 === void 0 ? void 0 : _operationsRef$curren3.className.includes(operationsHiddenClassName);\n    setWrapperContentWidth(newWrapperScrollWidth - (isOperationHidden ? 0 : newOperationWidth));\n    setWrapperContentHeight(newWrapperScrollHeight - (isOperationHidden ? 0 : newOperationHeight)); // Update buttons records\n\n    setTabSizes(function () {\n      var newSizes = new Map();\n      tabs.forEach(function (_ref2) {\n        var key = _ref2.key;\n        var btnNode = getBtnRef(key).current;\n        if (btnNode) {\n          newSizes.set(key, {\n            width: btnNode.offsetWidth,\n            height: btnNode.offsetHeight,\n            left: btnNode.offsetLeft,\n            top: btnNode.offsetTop\n          });\n        }\n      });\n      return newSizes;\n    });\n  }); // ======================== Dropdown =======================\n\n  var startHiddenTabs = tabs.slice(0, visibleStart);\n  var endHiddenTabs = tabs.slice(visibleEnd + 1);\n  var hiddenTabs = [].concat(_toConsumableArray(startHiddenTabs), _toConsumableArray(endHiddenTabs)); // =================== Link & Operations ===================\n\n  var _useState19 = useState(),\n    _useState20 = _slicedToArray(_useState19, 2),\n    inkStyle = _useState20[0],\n    setInkStyle = _useState20[1];\n  var activeTabOffset = tabOffsets.get(activeKey); // Delay set ink style to avoid remove tab blink\n\n  var inkBarRafRef = useRef();\n  function cleanInkBarRaf() {\n    raf.cancel(inkBarRafRef.current);\n  }\n  useEffect(function () {\n    var newInkStyle = {};\n    if (activeTabOffset) {\n      if (tabPositionTopOrBottom) {\n        if (rtl) {\n          newInkStyle.right = activeTabOffset.right;\n        } else {\n          newInkStyle.left = activeTabOffset.left;\n        }\n        newInkStyle.width = activeTabOffset.width;\n      } else {\n        newInkStyle.top = activeTabOffset.top;\n        newInkStyle.height = activeTabOffset.height;\n      }\n    }\n    cleanInkBarRaf();\n    inkBarRafRef.current = raf(function () {\n      setInkStyle(newInkStyle);\n    });\n    return cleanInkBarRaf;\n  }, [activeTabOffset, tabPositionTopOrBottom, rtl]); // ========================= Effect ========================\n\n  useEffect(function () {\n    scrollToTab();\n  }, [activeKey, activeTabOffset, tabOffsets, tabPositionTopOrBottom]); // Should recalculate when rtl changed\n\n  useEffect(function () {\n    onListHolderResize();\n  }, [rtl, tabBarGutter, activeKey, tabs.map(function (tab) {\n    return tab.key;\n  }).join('_')]); // ========================= Render ========================\n\n  var hasDropdown = !!hiddenTabs.length;\n  var wrapPrefix = \"\".concat(prefixCls, \"-nav-wrap\");\n  var pingLeft;\n  var pingRight;\n  var pingTop;\n  var pingBottom;\n  if (tabPositionTopOrBottom) {\n    if (rtl) {\n      pingRight = transformLeft > 0;\n      pingLeft = transformLeft + wrapperWidth < wrapperScrollWidth;\n    } else {\n      pingLeft = transformLeft < 0;\n      pingRight = -transformLeft + wrapperWidth < wrapperScrollWidth;\n    }\n  } else {\n    pingTop = transformTop < 0;\n    pingBottom = -transformTop + wrapperHeight < wrapperScrollHeight;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    role: \"tablist\",\n    className: classNames(\"\".concat(prefixCls, \"-nav\"), className),\n    style: style,\n    onKeyDown: function onKeyDown() {\n      // No need animation when use keyboard\n      doLockAnimation();\n    }\n  }, /*#__PURE__*/React.createElement(ExtraContent, {\n    position: \"left\",\n    extra: extra,\n    prefixCls: prefixCls\n  }), /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onListHolderResize\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(wrapPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-left\"), pingLeft), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-right\"), pingRight), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-top\"), pingTop), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-bottom\"), pingBottom), _classNames)),\n    ref: tabsWrapperRef\n  }, /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onListHolderResize\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: tabListRef,\n    className: \"\".concat(prefixCls, \"-nav-list\"),\n    style: {\n      transform: \"translate(\".concat(transformLeft, \"px, \").concat(transformTop, \"px)\"),\n      transition: lockAnimation ? 'none' : undefined\n    }\n  }, tabNodes, /*#__PURE__*/React.createElement(AddButton, {\n    ref: innerAddButtonRef,\n    prefixCls: prefixCls,\n    locale: locale,\n    editable: editable,\n    style: _objectSpread(_objectSpread({}, tabNodes.length === 0 ? undefined : tabNodeStyle), {}, {\n      visibility: hasDropdown ? 'hidden' : null\n    })\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-ink-bar\"), _defineProperty({}, \"\".concat(prefixCls, \"-ink-bar-animated\"), animated.inkBar)),\n    style: inkStyle\n  }))))), /*#__PURE__*/React.createElement(OperationNode, _extends({}, props, {\n    removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\n    ref: operationsRef,\n    prefixCls: prefixCls,\n    tabs: hiddenTabs,\n    className: !hasDropdown && operationsHiddenClassName,\n    tabMoving: !!lockAnimation\n  })), /*#__PURE__*/React.createElement(ExtraContent, {\n    position: \"right\",\n    extra: extra,\n    prefixCls: prefixCls\n  }));\n  /* eslint-enable */\n}\n\nexport default /*#__PURE__*/React.forwardRef(TabNavList);","map":{"version":3,"names":["_extends","_defineProperty","_toConsumableArray","_objectSpread","_slicedToArray","_typeof","React","useState","useRef","useEffect","classNames","raf","ResizeObserver","useRaf","useRafState","TabNode","useOffsets","useVisibleRange","OperationNode","TabContext","useTouchMove","useRefs","AddButton","useSyncState","ExtraContent","_ref","position","prefixCls","extra","content","assertExtra","isValidElement","right","left","createElement","className","concat","TabNavList","props","ref","_classNames","_React$useContext","useContext","tabs","style","id","animated","activeKey","rtl","editable","locale","tabPosition","tabBarGutter","children","onTabClick","onTabScroll","tabsWrapperRef","tabListRef","operationsRef","innerAddButtonRef","_useRefs","_useRefs2","getBtnRef","removeBtnRef","tabPositionTopOrBottom","_useSyncState","next","prev","direction","_useSyncState2","transformLeft","setTransformLeft","_useSyncState3","_useSyncState4","transformTop","setTransformTop","_useState","_useState2","wrapperScrollWidth","setWrapperScrollWidth","_useState3","_useState4","wrapperScrollHeight","setWrapperScrollHeight","_useState5","_useState6","wrapperContentWidth","setWrapperContentWidth","_useState7","_useState8","wrapperContentHeight","setWrapperContentHeight","_useState9","_useState10","wrapperWidth","setWrapperWidth","_useState11","_useState12","wrapperHeight","setWrapperHeight","_useState13","_useState14","addWidth","setAddWidth","_useState15","_useState16","addHeight","setAddHeight","_useRafState","Map","_useRafState2","tabSizes","setTabSizes","tabOffsets","operationsHiddenClassName","transformMin","transformMax","Math","min","max","alignInRange","value","touchMovingRef","_useState17","_useState18","lockAnimation","setLockAnimation","doLockAnimation","Date","now","clearTouchMoving","window","clearTimeout","current","offsetX","offsetY","doMove","setState","offset","newValue","setTimeout","scrollToTab","key","arguments","length","undefined","tabOffset","get","width","height","top","newTransform","_newTransform","_useVisibleRange","_useVisibleRange2","visibleStart","visibleEnd","tabNodeStyle","marginTop","tabNodes","map","tab","i","closable","active","renderWrapper","removeAriaLabel","onClick","e","onRemove","onFocus","scrollLeft","scrollTop","onListHolderResize","_tabsWrapperRef$curre","_tabsWrapperRef$curre2","_innerAddButtonRef$cu","_innerAddButtonRef$cu2","_operationsRef$curren","_operationsRef$curren2","_tabListRef$current","_tabListRef$current2","_operationsRef$curren3","offsetWidth","offsetHeight","newAddWidth","newAddHeight","newOperationWidth","newOperationHeight","newWrapperScrollWidth","newWrapperScrollHeight","isOperationHidden","includes","newSizes","forEach","_ref2","btnNode","set","offsetLeft","offsetTop","startHiddenTabs","slice","endHiddenTabs","hiddenTabs","_useState19","_useState20","inkStyle","setInkStyle","activeTabOffset","inkBarRafRef","cleanInkBarRaf","cancel","newInkStyle","join","hasDropdown","wrapPrefix","pingLeft","pingRight","pingTop","pingBottom","role","onKeyDown","onResize","transform","transition","visibility","inkBar","tabMoving","forwardRef"],"sources":["F:/outletcontrol/frontend/node_modules/rc-tabs/es/TabNavList/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\r\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\r\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\r\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\r\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\r\nimport * as React from 'react';\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport classNames from 'classnames';\r\nimport raf from \"rc-util/es/raf\";\r\nimport ResizeObserver from 'rc-resize-observer';\r\nimport useRaf, { useRafState } from '../hooks/useRaf';\r\nimport TabNode from './TabNode';\r\nimport useOffsets from '../hooks/useOffsets';\r\nimport useVisibleRange from '../hooks/useVisibleRange';\r\nimport OperationNode from './OperationNode';\r\nimport TabContext from '../TabContext';\r\nimport useTouchMove from '../hooks/useTouchMove';\r\nimport useRefs from '../hooks/useRefs';\r\nimport AddButton from './AddButton';\r\nimport useSyncState from '../hooks/useSyncState';\r\n\r\nvar ExtraContent = function ExtraContent(_ref) {\r\n  var position = _ref.position,\r\n      prefixCls = _ref.prefixCls,\r\n      extra = _ref.extra;\r\n  if (!extra) return null;\r\n  var content; // Parse extra\r\n\r\n  var assertExtra = {};\r\n\r\n  if (extra && _typeof(extra) === 'object' && ! /*#__PURE__*/React.isValidElement(extra)) {\r\n    assertExtra = extra;\r\n  } else {\r\n    assertExtra.right = extra;\r\n  }\r\n\r\n  if (position === 'right') {\r\n    content = assertExtra.right;\r\n  }\r\n\r\n  if (position === 'left') {\r\n    content = assertExtra.left;\r\n  }\r\n\r\n  return content ? /*#__PURE__*/React.createElement(\"div\", {\r\n    className: \"\".concat(prefixCls, \"-extra-content\")\r\n  }, content) : null;\r\n};\r\n\r\nfunction TabNavList(props, ref) {\r\n  var _classNames;\r\n\r\n  var _React$useContext = React.useContext(TabContext),\r\n      prefixCls = _React$useContext.prefixCls,\r\n      tabs = _React$useContext.tabs;\r\n\r\n  var className = props.className,\r\n      style = props.style,\r\n      id = props.id,\r\n      animated = props.animated,\r\n      activeKey = props.activeKey,\r\n      rtl = props.rtl,\r\n      extra = props.extra,\r\n      editable = props.editable,\r\n      locale = props.locale,\r\n      tabPosition = props.tabPosition,\r\n      tabBarGutter = props.tabBarGutter,\r\n      children = props.children,\r\n      onTabClick = props.onTabClick,\r\n      onTabScroll = props.onTabScroll;\r\n  var tabsWrapperRef = useRef();\r\n  var tabListRef = useRef();\r\n  var operationsRef = useRef();\r\n  var innerAddButtonRef = useRef();\r\n\r\n  var _useRefs = useRefs(),\r\n      _useRefs2 = _slicedToArray(_useRefs, 2),\r\n      getBtnRef = _useRefs2[0],\r\n      removeBtnRef = _useRefs2[1];\r\n\r\n  var tabPositionTopOrBottom = tabPosition === 'top' || tabPosition === 'bottom';\r\n\r\n  var _useSyncState = useSyncState(0, function (next, prev) {\r\n    if (tabPositionTopOrBottom && onTabScroll) {\r\n      onTabScroll({\r\n        direction: next > prev ? 'left' : 'right'\r\n      });\r\n    }\r\n  }),\r\n      _useSyncState2 = _slicedToArray(_useSyncState, 2),\r\n      transformLeft = _useSyncState2[0],\r\n      setTransformLeft = _useSyncState2[1];\r\n\r\n  var _useSyncState3 = useSyncState(0, function (next, prev) {\r\n    if (!tabPositionTopOrBottom && onTabScroll) {\r\n      onTabScroll({\r\n        direction: next > prev ? 'top' : 'bottom'\r\n      });\r\n    }\r\n  }),\r\n      _useSyncState4 = _slicedToArray(_useSyncState3, 2),\r\n      transformTop = _useSyncState4[0],\r\n      setTransformTop = _useSyncState4[1];\r\n\r\n  var _useState = useState(0),\r\n      _useState2 = _slicedToArray(_useState, 2),\r\n      wrapperScrollWidth = _useState2[0],\r\n      setWrapperScrollWidth = _useState2[1];\r\n\r\n  var _useState3 = useState(0),\r\n      _useState4 = _slicedToArray(_useState3, 2),\r\n      wrapperScrollHeight = _useState4[0],\r\n      setWrapperScrollHeight = _useState4[1];\r\n\r\n  var _useState5 = useState(0),\r\n      _useState6 = _slicedToArray(_useState5, 2),\r\n      wrapperContentWidth = _useState6[0],\r\n      setWrapperContentWidth = _useState6[1];\r\n\r\n  var _useState7 = useState(0),\r\n      _useState8 = _slicedToArray(_useState7, 2),\r\n      wrapperContentHeight = _useState8[0],\r\n      setWrapperContentHeight = _useState8[1];\r\n\r\n  var _useState9 = useState(null),\r\n      _useState10 = _slicedToArray(_useState9, 2),\r\n      wrapperWidth = _useState10[0],\r\n      setWrapperWidth = _useState10[1];\r\n\r\n  var _useState11 = useState(null),\r\n      _useState12 = _slicedToArray(_useState11, 2),\r\n      wrapperHeight = _useState12[0],\r\n      setWrapperHeight = _useState12[1];\r\n\r\n  var _useState13 = useState(0),\r\n      _useState14 = _slicedToArray(_useState13, 2),\r\n      addWidth = _useState14[0],\r\n      setAddWidth = _useState14[1];\r\n\r\n  var _useState15 = useState(0),\r\n      _useState16 = _slicedToArray(_useState15, 2),\r\n      addHeight = _useState16[0],\r\n      setAddHeight = _useState16[1];\r\n\r\n  var _useRafState = useRafState(new Map()),\r\n      _useRafState2 = _slicedToArray(_useRafState, 2),\r\n      tabSizes = _useRafState2[0],\r\n      setTabSizes = _useRafState2[1];\r\n\r\n  var tabOffsets = useOffsets(tabs, tabSizes, wrapperScrollWidth); // ========================== Util =========================\r\n\r\n  var operationsHiddenClassName = \"\".concat(prefixCls, \"-nav-operations-hidden\");\r\n  var transformMin = 0;\r\n  var transformMax = 0;\r\n\r\n  if (!tabPositionTopOrBottom) {\r\n    transformMin = Math.min(0, wrapperHeight - wrapperScrollHeight);\r\n    transformMax = 0;\r\n  } else if (rtl) {\r\n    transformMin = 0;\r\n    transformMax = Math.max(0, wrapperScrollWidth - wrapperWidth);\r\n  } else {\r\n    transformMin = Math.min(0, wrapperWidth - wrapperScrollWidth);\r\n    transformMax = 0;\r\n  }\r\n\r\n  function alignInRange(value) {\r\n    if (value < transformMin) {\r\n      return transformMin;\r\n    }\r\n\r\n    if (value > transformMax) {\r\n      return transformMax;\r\n    }\r\n\r\n    return value;\r\n  } // ========================= Mobile ========================\r\n\r\n\r\n  var touchMovingRef = useRef();\r\n\r\n  var _useState17 = useState(),\r\n      _useState18 = _slicedToArray(_useState17, 2),\r\n      lockAnimation = _useState18[0],\r\n      setLockAnimation = _useState18[1];\r\n\r\n  function doLockAnimation() {\r\n    setLockAnimation(Date.now());\r\n  }\r\n\r\n  function clearTouchMoving() {\r\n    window.clearTimeout(touchMovingRef.current);\r\n  }\r\n\r\n  useTouchMove(tabsWrapperRef, function (offsetX, offsetY) {\r\n    function doMove(setState, offset) {\r\n      setState(function (value) {\r\n        var newValue = alignInRange(value + offset);\r\n        return newValue;\r\n      });\r\n    }\r\n\r\n    if (tabPositionTopOrBottom) {\r\n      // Skip scroll if place is enough\r\n      if (wrapperWidth >= wrapperScrollWidth) {\r\n        return false;\r\n      }\r\n\r\n      doMove(setTransformLeft, offsetX);\r\n    } else {\r\n      if (wrapperHeight >= wrapperScrollHeight) {\r\n        return false;\r\n      }\r\n\r\n      doMove(setTransformTop, offsetY);\r\n    }\r\n\r\n    clearTouchMoving();\r\n    doLockAnimation();\r\n    return true;\r\n  });\r\n  useEffect(function () {\r\n    clearTouchMoving();\r\n\r\n    if (lockAnimation) {\r\n      touchMovingRef.current = window.setTimeout(function () {\r\n        setLockAnimation(0);\r\n      }, 100);\r\n    }\r\n\r\n    return clearTouchMoving;\r\n  }, [lockAnimation]); // ========================= Scroll ========================\r\n\r\n  function scrollToTab() {\r\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : activeKey;\r\n    var tabOffset = tabOffsets.get(key) || {\r\n      width: 0,\r\n      height: 0,\r\n      left: 0,\r\n      right: 0,\r\n      top: 0\r\n    };\r\n\r\n    if (tabPositionTopOrBottom) {\r\n      // ============ Align with top & bottom ============\r\n      var newTransform = transformLeft; // RTL\r\n\r\n      if (rtl) {\r\n        if (tabOffset.right < transformLeft) {\r\n          newTransform = tabOffset.right;\r\n        } else if (tabOffset.right + tabOffset.width > transformLeft + wrapperWidth) {\r\n          newTransform = tabOffset.right + tabOffset.width - wrapperWidth;\r\n        }\r\n      } // LTR\r\n      else if (tabOffset.left < -transformLeft) {\r\n        newTransform = -tabOffset.left;\r\n      } else if (tabOffset.left + tabOffset.width > -transformLeft + wrapperWidth) {\r\n        newTransform = -(tabOffset.left + tabOffset.width - wrapperWidth);\r\n      }\r\n\r\n      setTransformTop(0);\r\n      setTransformLeft(alignInRange(newTransform));\r\n    } else {\r\n      // ============ Align with left & right ============\r\n      var _newTransform = transformTop;\r\n\r\n      if (tabOffset.top < -transformTop) {\r\n        _newTransform = -tabOffset.top;\r\n      } else if (tabOffset.top + tabOffset.height > -transformTop + wrapperHeight) {\r\n        _newTransform = -(tabOffset.top + tabOffset.height - wrapperHeight);\r\n      }\r\n\r\n      setTransformLeft(0);\r\n      setTransformTop(alignInRange(_newTransform));\r\n    }\r\n  } // ========================== Tab ==========================\r\n  // Render tab node & collect tab offset\r\n\r\n\r\n  var _useVisibleRange = useVisibleRange(tabOffsets, {\r\n    width: wrapperWidth,\r\n    height: wrapperHeight,\r\n    left: transformLeft,\r\n    top: transformTop\r\n  }, {\r\n    width: wrapperContentWidth,\r\n    height: wrapperContentHeight\r\n  }, {\r\n    width: addWidth,\r\n    height: addHeight\r\n  }, _objectSpread(_objectSpread({}, props), {}, {\r\n    tabs: tabs\r\n  })),\r\n      _useVisibleRange2 = _slicedToArray(_useVisibleRange, 2),\r\n      visibleStart = _useVisibleRange2[0],\r\n      visibleEnd = _useVisibleRange2[1];\r\n\r\n  var tabNodeStyle = {};\r\n\r\n  if (tabPosition === 'top' || tabPosition === 'bottom') {\r\n    tabNodeStyle[rtl ? 'marginRight' : 'marginLeft'] = tabBarGutter;\r\n  } else {\r\n    tabNodeStyle.marginTop = tabBarGutter;\r\n  }\r\n\r\n  var tabNodes = tabs.map(function (tab, i) {\r\n    var key = tab.key;\r\n    return /*#__PURE__*/React.createElement(TabNode, {\r\n      id: id,\r\n      prefixCls: prefixCls,\r\n      key: key,\r\n      tab: tab\r\n      /* first node should not have margin left */\r\n      ,\r\n      style: i === 0 ? undefined : tabNodeStyle,\r\n      closable: tab.closable,\r\n      editable: editable,\r\n      active: key === activeKey,\r\n      renderWrapper: children,\r\n      removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\r\n      ref: getBtnRef(key),\r\n      onClick: function onClick(e) {\r\n        onTabClick(key, e);\r\n      },\r\n      onRemove: function onRemove() {\r\n        removeBtnRef(key);\r\n      },\r\n      onFocus: function onFocus() {\r\n        scrollToTab(key);\r\n        doLockAnimation();\r\n\r\n        if (!tabsWrapperRef.current) {\r\n          return;\r\n        } // Focus element will make scrollLeft change which we should reset back\r\n\r\n\r\n        if (!rtl) {\r\n          tabsWrapperRef.current.scrollLeft = 0;\r\n        }\r\n\r\n        tabsWrapperRef.current.scrollTop = 0;\r\n      }\r\n    });\r\n  });\r\n  var onListHolderResize = useRaf(function () {\r\n    var _tabsWrapperRef$curre, _tabsWrapperRef$curre2, _innerAddButtonRef$cu, _innerAddButtonRef$cu2, _operationsRef$curren, _operationsRef$curren2, _tabListRef$current, _tabListRef$current2, _operationsRef$curren3;\r\n\r\n    // Update wrapper records\r\n    var offsetWidth = ((_tabsWrapperRef$curre = tabsWrapperRef.current) === null || _tabsWrapperRef$curre === void 0 ? void 0 : _tabsWrapperRef$curre.offsetWidth) || 0;\r\n    var offsetHeight = ((_tabsWrapperRef$curre2 = tabsWrapperRef.current) === null || _tabsWrapperRef$curre2 === void 0 ? void 0 : _tabsWrapperRef$curre2.offsetHeight) || 0;\r\n    var newAddWidth = ((_innerAddButtonRef$cu = innerAddButtonRef.current) === null || _innerAddButtonRef$cu === void 0 ? void 0 : _innerAddButtonRef$cu.offsetWidth) || 0;\r\n    var newAddHeight = ((_innerAddButtonRef$cu2 = innerAddButtonRef.current) === null || _innerAddButtonRef$cu2 === void 0 ? void 0 : _innerAddButtonRef$cu2.offsetHeight) || 0;\r\n    var newOperationWidth = ((_operationsRef$curren = operationsRef.current) === null || _operationsRef$curren === void 0 ? void 0 : _operationsRef$curren.offsetWidth) || 0;\r\n    var newOperationHeight = ((_operationsRef$curren2 = operationsRef.current) === null || _operationsRef$curren2 === void 0 ? void 0 : _operationsRef$curren2.offsetHeight) || 0;\r\n    setWrapperWidth(offsetWidth);\r\n    setWrapperHeight(offsetHeight);\r\n    setAddWidth(newAddWidth);\r\n    setAddHeight(newAddHeight);\r\n    var newWrapperScrollWidth = (((_tabListRef$current = tabListRef.current) === null || _tabListRef$current === void 0 ? void 0 : _tabListRef$current.offsetWidth) || 0) - newAddWidth;\r\n    var newWrapperScrollHeight = (((_tabListRef$current2 = tabListRef.current) === null || _tabListRef$current2 === void 0 ? void 0 : _tabListRef$current2.offsetHeight) || 0) - newAddHeight;\r\n    setWrapperScrollWidth(newWrapperScrollWidth);\r\n    setWrapperScrollHeight(newWrapperScrollHeight);\r\n    var isOperationHidden = (_operationsRef$curren3 = operationsRef.current) === null || _operationsRef$curren3 === void 0 ? void 0 : _operationsRef$curren3.className.includes(operationsHiddenClassName);\r\n    setWrapperContentWidth(newWrapperScrollWidth - (isOperationHidden ? 0 : newOperationWidth));\r\n    setWrapperContentHeight(newWrapperScrollHeight - (isOperationHidden ? 0 : newOperationHeight)); // Update buttons records\r\n\r\n    setTabSizes(function () {\r\n      var newSizes = new Map();\r\n      tabs.forEach(function (_ref2) {\r\n        var key = _ref2.key;\r\n        var btnNode = getBtnRef(key).current;\r\n\r\n        if (btnNode) {\r\n          newSizes.set(key, {\r\n            width: btnNode.offsetWidth,\r\n            height: btnNode.offsetHeight,\r\n            left: btnNode.offsetLeft,\r\n            top: btnNode.offsetTop\r\n          });\r\n        }\r\n      });\r\n      return newSizes;\r\n    });\r\n  }); // ======================== Dropdown =======================\r\n\r\n  var startHiddenTabs = tabs.slice(0, visibleStart);\r\n  var endHiddenTabs = tabs.slice(visibleEnd + 1);\r\n  var hiddenTabs = [].concat(_toConsumableArray(startHiddenTabs), _toConsumableArray(endHiddenTabs)); // =================== Link & Operations ===================\r\n\r\n  var _useState19 = useState(),\r\n      _useState20 = _slicedToArray(_useState19, 2),\r\n      inkStyle = _useState20[0],\r\n      setInkStyle = _useState20[1];\r\n\r\n  var activeTabOffset = tabOffsets.get(activeKey); // Delay set ink style to avoid remove tab blink\r\n\r\n  var inkBarRafRef = useRef();\r\n\r\n  function cleanInkBarRaf() {\r\n    raf.cancel(inkBarRafRef.current);\r\n  }\r\n\r\n  useEffect(function () {\r\n    var newInkStyle = {};\r\n\r\n    if (activeTabOffset) {\r\n      if (tabPositionTopOrBottom) {\r\n        if (rtl) {\r\n          newInkStyle.right = activeTabOffset.right;\r\n        } else {\r\n          newInkStyle.left = activeTabOffset.left;\r\n        }\r\n\r\n        newInkStyle.width = activeTabOffset.width;\r\n      } else {\r\n        newInkStyle.top = activeTabOffset.top;\r\n        newInkStyle.height = activeTabOffset.height;\r\n      }\r\n    }\r\n\r\n    cleanInkBarRaf();\r\n    inkBarRafRef.current = raf(function () {\r\n      setInkStyle(newInkStyle);\r\n    });\r\n    return cleanInkBarRaf;\r\n  }, [activeTabOffset, tabPositionTopOrBottom, rtl]); // ========================= Effect ========================\r\n\r\n  useEffect(function () {\r\n    scrollToTab();\r\n  }, [activeKey, activeTabOffset, tabOffsets, tabPositionTopOrBottom]); // Should recalculate when rtl changed\r\n\r\n  useEffect(function () {\r\n    onListHolderResize();\r\n  }, [rtl, tabBarGutter, activeKey, tabs.map(function (tab) {\r\n    return tab.key;\r\n  }).join('_')]); // ========================= Render ========================\r\n\r\n  var hasDropdown = !!hiddenTabs.length;\r\n  var wrapPrefix = \"\".concat(prefixCls, \"-nav-wrap\");\r\n  var pingLeft;\r\n  var pingRight;\r\n  var pingTop;\r\n  var pingBottom;\r\n\r\n  if (tabPositionTopOrBottom) {\r\n    if (rtl) {\r\n      pingRight = transformLeft > 0;\r\n      pingLeft = transformLeft + wrapperWidth < wrapperScrollWidth;\r\n    } else {\r\n      pingLeft = transformLeft < 0;\r\n      pingRight = -transformLeft + wrapperWidth < wrapperScrollWidth;\r\n    }\r\n  } else {\r\n    pingTop = transformTop < 0;\r\n    pingBottom = -transformTop + wrapperHeight < wrapperScrollHeight;\r\n  }\r\n\r\n  return /*#__PURE__*/React.createElement(\"div\", {\r\n    ref: ref,\r\n    role: \"tablist\",\r\n    className: classNames(\"\".concat(prefixCls, \"-nav\"), className),\r\n    style: style,\r\n    onKeyDown: function onKeyDown() {\r\n      // No need animation when use keyboard\r\n      doLockAnimation();\r\n    }\r\n  }, /*#__PURE__*/React.createElement(ExtraContent, {\r\n    position: \"left\",\r\n    extra: extra,\r\n    prefixCls: prefixCls\r\n  }), /*#__PURE__*/React.createElement(ResizeObserver, {\r\n    onResize: onListHolderResize\r\n  }, /*#__PURE__*/React.createElement(\"div\", {\r\n    className: classNames(wrapPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-left\"), pingLeft), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-right\"), pingRight), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-top\"), pingTop), _defineProperty(_classNames, \"\".concat(wrapPrefix, \"-ping-bottom\"), pingBottom), _classNames)),\r\n    ref: tabsWrapperRef\r\n  }, /*#__PURE__*/React.createElement(ResizeObserver, {\r\n    onResize: onListHolderResize\r\n  }, /*#__PURE__*/React.createElement(\"div\", {\r\n    ref: tabListRef,\r\n    className: \"\".concat(prefixCls, \"-nav-list\"),\r\n    style: {\r\n      transform: \"translate(\".concat(transformLeft, \"px, \").concat(transformTop, \"px)\"),\r\n      transition: lockAnimation ? 'none' : undefined\r\n    }\r\n  }, tabNodes, /*#__PURE__*/React.createElement(AddButton, {\r\n    ref: innerAddButtonRef,\r\n    prefixCls: prefixCls,\r\n    locale: locale,\r\n    editable: editable,\r\n    style: _objectSpread(_objectSpread({}, tabNodes.length === 0 ? undefined : tabNodeStyle), {}, {\r\n      visibility: hasDropdown ? 'hidden' : null\r\n    })\r\n  }), /*#__PURE__*/React.createElement(\"div\", {\r\n    className: classNames(\"\".concat(prefixCls, \"-ink-bar\"), _defineProperty({}, \"\".concat(prefixCls, \"-ink-bar-animated\"), animated.inkBar)),\r\n    style: inkStyle\r\n  }))))), /*#__PURE__*/React.createElement(OperationNode, _extends({}, props, {\r\n    removeAriaLabel: locale === null || locale === void 0 ? void 0 : locale.removeAriaLabel,\r\n    ref: operationsRef,\r\n    prefixCls: prefixCls,\r\n    tabs: hiddenTabs,\r\n    className: !hasDropdown && operationsHiddenClassName,\r\n    tabMoving: !!lockAnimation\r\n  })), /*#__PURE__*/React.createElement(ExtraContent, {\r\n    position: \"right\",\r\n    extra: extra,\r\n    prefixCls: prefixCls\r\n  }));\r\n  /* eslint-enable */\r\n}\r\n\r\nexport default /*#__PURE__*/React.forwardRef(TabNavList);"],"mappings":"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"},"metadata":{},"sourceType":"module"}