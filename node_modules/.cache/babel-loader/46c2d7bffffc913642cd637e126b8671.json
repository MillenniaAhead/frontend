{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport useDestroyed from './hooks/useDestroyed';\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef();\n  var isDestroyed = useDestroyed();\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    loading = _React$useState2[0],\n    setLoading = _React$useState2[1];\n  React.useEffect(function () {\n    var timeoutId;\n    if (props.autoFocus) {\n      var $this = ref.current;\n      timeoutId = setTimeout(function () {\n        return $this.focus();\n      });\n    }\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    var close = props.close;\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n      close.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n      clickedRef.current = false;\n    });\n  };\n  var onClick = function onClick(e) {\n    var actionFn = props.actionFn,\n      close = props.close;\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      close();\n      return;\n    }\n    var returnValueOfOnOk;\n    if (props.emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        close(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        close();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  var type = props.type,\n    children = props.children,\n    prefixCls = props.prefixCls,\n    buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\nexport default ActionButton;","map":{"version":3,"names":["_extends","_slicedToArray","React","Button","convertLegacyProps","useDestroyed","isThenable","thing","then","ActionButton","props","clickedRef","useRef","ref","isDestroyed","_React$useState","useState","_React$useState2","loading","setLoading","useEffect","timeoutId","autoFocus","$this","current","setTimeout","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","close","apply","arguments","e","console","error","onClick","actionFn","emitEvent","quitOnNullishReturnValue","length","type","children","prefixCls","buttonProps","createElement"],"sources":["F:/outletcontrol/frontend/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\r\nimport * as React from 'react';\r\nimport Button from '../button';\r\nimport { convertLegacyProps } from '../button/button';\r\nimport useDestroyed from './hooks/useDestroyed';\r\n\r\nfunction isThenable(thing) {\r\n  return !!(thing && !!thing.then);\r\n}\r\n\r\nvar ActionButton = function ActionButton(props) {\r\n  var clickedRef = React.useRef(false);\r\n  var ref = React.useRef();\r\n  var isDestroyed = useDestroyed();\r\n\r\n  var _React$useState = React.useState(false),\r\n      _React$useState2 = _slicedToArray(_React$useState, 2),\r\n      loading = _React$useState2[0],\r\n      setLoading = _React$useState2[1];\r\n\r\n  React.useEffect(function () {\r\n    var timeoutId;\r\n\r\n    if (props.autoFocus) {\r\n      var $this = ref.current;\r\n      timeoutId = setTimeout(function () {\r\n        return $this.focus();\r\n      });\r\n    }\r\n\r\n    return function () {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\r\n    var close = props.close;\r\n\r\n    if (!isThenable(returnValueOfOnOk)) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    returnValueOfOnOk.then(function () {\r\n      if (!isDestroyed()) {\r\n        setLoading(false);\r\n      }\r\n\r\n      close.apply(void 0, arguments);\r\n      clickedRef.current = false;\r\n    }, function (e) {\r\n      // Emit error when catch promise reject\r\n      // eslint-disable-next-line no-console\r\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\r\n\r\n      if (!isDestroyed()) {\r\n        setLoading(false);\r\n      }\r\n\r\n      clickedRef.current = false;\r\n    });\r\n  };\r\n\r\n  var onClick = function onClick(e) {\r\n    var actionFn = props.actionFn,\r\n        close = props.close;\r\n\r\n    if (clickedRef.current) {\r\n      return;\r\n    }\r\n\r\n    clickedRef.current = true;\r\n\r\n    if (!actionFn) {\r\n      close();\r\n      return;\r\n    }\r\n\r\n    var returnValueOfOnOk;\r\n\r\n    if (props.emitEvent) {\r\n      returnValueOfOnOk = actionFn(e);\r\n\r\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\r\n        clickedRef.current = false;\r\n        close(e);\r\n        return;\r\n      }\r\n    } else if (actionFn.length) {\r\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\r\n\r\n      clickedRef.current = false;\r\n    } else {\r\n      returnValueOfOnOk = actionFn();\r\n\r\n      if (!returnValueOfOnOk) {\r\n        close();\r\n        return;\r\n      }\r\n    }\r\n\r\n    handlePromiseOnOk(returnValueOfOnOk);\r\n  };\r\n\r\n  var type = props.type,\r\n      children = props.children,\r\n      prefixCls = props.prefixCls,\r\n      buttonProps = props.buttonProps;\r\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\r\n    onClick: onClick,\r\n    loading: loading,\r\n    prefixCls: prefixCls\r\n  }, buttonProps, {\r\n    ref: ref\r\n  }), children);\r\n};\r\n\r\nexport default ActionButton;"],"mappings":"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"},"metadata":{},"sourceType":"module"}